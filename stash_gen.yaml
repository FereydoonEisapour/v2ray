mode: rule
log-level: info
http:
  force-http-engine:
  - '*:80'
  - '*:4480'
  - '*:9102'
  ca: ''
  ca-passphrase: ''
  mitm:
  - g.cn
  - '*.google.cn'
  - weather-data.apple.com
  - weather-data.apple.com:*
  - '*.weather-data.apple.com'
  - -exclude.weather-data.apple.com
  url-rewrite:
  - ^http://g\.cn http://www.google.com header
  - ^https?://www\.google\.cn https://www.google.com 302
  - ^https?://ad\.example - reject
  script:
  - match: https://weather-data.apple.com/v2/weather/[\w-]+/-?[0-9]+\.[0-9]+/-?[0-9]+\.[0-9]+\?
    name: weather-us-aqi
    type: response
    require-body: true
    timeout: 10
    argument: ''
    debug: false
    binary-mode: false
    max-size: 1048576
cron:
  script:
  - name: weather-us-aqi
    cron: '* * * * *'
    timeout: 10
    argument: ''
    debug: false
script-providers:
  weather-us-aqi:
    url: https://raw.githubusercontent.com/STASH-NETWORKS-LIMITED/stash-example/main/script/iOS15_Weather_AQI_Standard.js
    interval: 86400
script:
  shortcuts:
    quic: network == 'udp' and (dst_port == 443 or dst_port == 4483 or dst_port ==
      9305)
hosts:
  '*.clash.dev': 127.0.0.1
  .dev: 127.0.0.1
  alpha.clash.dev: ::1
dns:
  default-nameserver:
  - 223.5.5.5
  - 114.114.114.114
  - system
  nameserver:
  - https://doh.pub/dns-query
  - https://dns.alidns.com/dns-query
  - quic://dns.adguard.com:853
  - doq://test.dns.nextdns.io:853
  - system
  skip-cert-verify: true
  nameserver-policy:
    www.baidu.com: 114.114.114.114
    +.internal.crop.com: system
  fake-ip-filter:
  - +.stun.*.*
  - +.stun.*.*.*
  - +.stun.*.*.*.*
  - +.stun.*.*.*.*.*
  - lens.l.google.com
  - '*.n.n.srv.nintendo.net'
  - +.stun.playstation.net
  - xbox.*.*.microsoft.com
  - '*.*.xboxlive.com'
  - '*.msftncsi.com'
  - '*.msftconnecttest.com'
  - '*.mcdn.bilivideo.cn'
proxies: []
proxy-groups:
- name: relay
  type: relay
  icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Direct.png
  proxies:
  - http
  - vmess
  - ss1
  - ss2
- name: auto
  type: url-test
  proxies: []
  interval: 300
- name: fallback-auto
  type: fallback
  proxies: []
  interval: 300
- name: load-balance
  type: load-balance
  proxies: []
  interval: 300
- name: Proxy
  type: select
  proxies:
  - auto
- name: ssid-group
  type: select
  proxies:
  - ss1
  - ss2
  - DIRECT
  ssid-policy:
    office: ss1
    home: ss2
    cellular: ss3
    default: DIRECT
- name: UseProvider
  type: select
  use:
  - provider1
  proxies:
  - Proxy
  - DIRECT
proxy-providers:
  provider1:
    url: https://raw.githubusercontent.com/STASH-NETWORKS-LIMITED/stash-example/main/config.yaml
    interval: 3600
rule-providers:
  proxy-domain:
    behavior: domain
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
    interval: 86400
  proxy-domain-text:
    behavior: domain-text
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/proxy.txt
    interval: 86400
  lan-cidr:
    behavior: ipcidr
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt
    interval: 86400
  ip-cidr-text:
    behavior: ipcidr-text
    url: https://cdn.jsdelivr.net/gh/17mon/china_ip_list@master/china_ip_list.txt
    interval: 86400
  apple-direct:
    behavior: classical
    url: https://cdn.jsdelivr.net/gh/Hackl0us/SS-Rule-Snippet@master/Rulesets/Clash/Basic/Apple-direct.yaml
    interval: 3600
rules:
- SCRIPT,quic,REJECT,no-track
- RULE-SET,proxy-domain,Proxy
- RULE-SET,apple-direct,DIRECT
- RULE-SET,lan-cidr,DIRECT
- RULE-SET,ip-cidr-text,DIRECT
- GEOIP,CN,DIRECT
- MATCH,Proxy
